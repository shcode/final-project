<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Register | Hunian Asri</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        
        <link rel="stylesheet" href="{{rootUrl}}global/css/bootstrap.css">
        <link rel="stylesheet" href="{{rootUrl}}global/css/bootstrap-responsive.css">
        <link rel="stylesheet" href="{{rootUrl}}global/css/header.css">
        <link rel="stylesheet" href="{{rootUrl}}global/css/style.css">
        <link rel="stylesheet" href="{{rootUrl}}global/css/style-responsive.css">
        <link rel="stylesheet" href="{{rootUrl}}global/css/main.css">
        <link rel="stylesheet" href="{{rootUrl}}global/css/theme/red.css">
        <link rel="stylesheet" href="{{rootUrl}}global/css/font-awesome.css">
        <!--[if IE 7]>
            <link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css">
        <![endif]-->
        <!--[if lt IE 9]>
        <link rel="stylesheet" type="text/css" href="{{rootUrl}}global/css/jquery.ui.1.10.2.ie.css"/>
        <![endif]-->            

        <script src="{{rootUrl}}global/js/plugins/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>
        <!-- include "../header" -->

        <div class="container" style="margin-top:50px">             
            <div class="row-fluid">
                <form class="reg-page" id="reg-form" method="post">
                    <h3>Daftar akun baru</h3>
                    <!-- if isset({{error}}) --> 
                    <div class="alert alert-error">
                        <button type="button" class="close" data-hide="alert">&times;</button>
                        <!-- loop error -->
                            <label class="error">{{error' value}}</label>
                        <!-- endloop -->
                    <!-- else -->
                    <div class="alert alert-error" style="display:none">
                            <button type="button" class="close" data-hide="alert">&times;</button>
                    <!-- endif -->
                    </div>
                    
                    <!-- if isset({{info}}) -->
                    <div class="alert alert-success">
                        <button type="button" class="close" data-hide="alert">&times;</button>
                        Anda telah berhasil mendaftar di HunianAsri. Silakan login untuk konfirmasi ID Card. 
                    </div>
                    <!-- endif -->                                    
                    <div class="row-fluid">
                        <div class="span6">
                            <label>Nama Lengkap <span class="color-red">*</span></label>
                            <input type="text" class="span12" name="name_user">
                            <label>Alamat <span class="color-red">*</span></label>
                            <textarea rows="5" class="span12" style="resize:vertical" name="user_address"></textarea>

                            <div class="controls">
                                <div class="span6">
                                    <label>Propinsi <span class="color-red">*</span></label>
                                    <select class="span12" name="province_id" id="propinsi">
                                        <option value="">Pilih Propinsi</option>
                                        <!-- loop propinsi -->
                                        <option value="{{propinsi' v.@province_id}}">{{propinsi' v.@name}}</option>
                                        <!-- endloop -->
                                    </select>
                                </div>
                                <div class="span6">
                                    <label>Kota/Kabupaten <span class="color-red">*</span></label>
                                    <select disabled="disabled" class="span12" name="district_id" id="kota">
                                        <option value="">Pilih Kota/Kab.</option>
                                    </select>
                                </div>
                            </div>
                            <div class="controls">                                
                                <div class="span6">
                                    <label>Kecamatan <span class="color-red">*</span></label>
                                    <select disabled="disabled" class="span12" name="subdistrict_id" id="kecamatan">
                                        <option value="">Pilih Kecamatan</option>
                                    </select>
                                </div>
                                <div class="span6">
                                    <label>Kode Pos <span class="color-red">*</span></label>
                                    <input type="text" class="span12" name="zip_code">
                                </div>                                
                            </div>
                            <div class="controls">                                
                                <div class="span6">                            
                                    <label>No. Telepon <span class="color-red">*</span></label>
                                    <input type="text" class="span12" name="phone">
                                </div>                                
                                <div class="span6">                            
                                    <label>No. Handphone</label>
                                    <input type="text" class="span12" name="mobile">
                                </div>                                
                            </div>                            
                        </div>
                        <div class="span6">
                            <label>Alamat Email <span class="color-red">*</span></label>
                            <input type="text" class="span12" name="email">                            
                            <div class="controls">
                                <label>Username <span class="color-red">*</span></label>
                                <input type="text" class="span12" name="username">
                            </div>
                            <div class="controls">
                                <div class="span6">
                                    <label>Password <span class="color-red">*</span></label>
                                    <input type="password" class="span12" name="password" id="input_pass">
                                </div>
                                <div class="span6">
                                    <label>Konfirmasi Password <span class="color-red">*</span></label>
                                    <input type="password" class="span12" name="password_confirm">
                                </div>
                            </div>                            
                            <hr>
                            <div class="controls form-inline">
                                <label class="checkbox"><input type="checkbox" name="agree"><small>&nbsp; Saya telah membaca dan menyetujui dengan <a href="">Syarat dan Ketentuan</a> dan menaati semua aturan yang berlaku.</small></label>
                            </div>
                            <br />
                            <input type="submit" class="btn-u btn-block" name="submit" value="Daftar" />
                            <hr>                  
                            <div class="controls">  
                                <a class="btn btn-primary btn-block" type="button" id="sign-in-facebook">
                                    <i class="icon-facebook icon-white"></i> Daftar dengan Facebook</a>
                                <a class="btn btn-primary btn-block" type="button" id="sign-in-twitter">
                                    <i class="icon-twitter icon-white"></i> Daftar dengan Twitter</a>
                                <a class="btn btn-primary btn-block" type="button" id="sign-in-google">
                                    <i class="icon-google-plus-sign icon-white"></i> Daftar dengan Google</a>                            
                            </div>
                            <hr>
                            <p>Sudah pernah mendaftar? Klik <a class="color-green" href="{{rootUrl}login">login</a> untuk masuk. <small class="pull-right">*) harus diisi</small></p>                            
                        </div>
                    </div>
                </form>
            </div><!--/row-fluid-->
        </div>


        <!-- include "../footer" -->
        
        <!--script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script-->
        <script>window.jQuery || document.write('<script src="{{rootUrl}}global/js/plugins/jquery-1.10.2.min.js"><\/script>')</script>
        <script src="{{rootUrl}}global/js/plugins/jquery-migrate-1.2.1.min.js"></script>
        <script src="{{rootUrl}}global/js/plugins/jquery.validate.min.js"></script>
        <script src="{{rootUrl}}global/js/plugins/bootstrap/bootstrap.min.js"></script>

        <script type="text/javascript">
            $(document).ready(function(){
                $("[data-hide]").on("click", function(){
                    $(this).closest("." + $(this).attr("data-hide")).hide();
                });
                var validator = $('#reg-form').validate({
                    rules : {
                        username: {
                            required: true,
                            remote: "/register/cekuser.json"
                        },
                        email: {
                            required: true,
                            email: true,
                            remote: "/register/cekemail.json"
                        },
                        user_address: "required",
                        province_id: "required",
                        district_id: "required",
                        subdistrict_id: "required",
                        zip_code: "required",
                        phone: "required",
                        password: "required",
                        password_confirm: {
                            required: true,
                            equalTo: "#input_pass"
                        },
                        name_user: "required",
                        agree: "required"
                    },
                    messages : {
                        username: {
                            required: "- Username belum diisi.",
                            remote: "- Username sudah pernah dipakai."
                        },
                        email: {
                            required: "- Email belum diisi.",
                            email: "- Format email salah.",
                            remote: "- Email sudah pernah dipakai."
                        },
                        user_address: "- Alamat belum diisi.",
                        province_id: "- Propinsi belum diisi.",
                        district_id: "- Kota belum diisi.",
                        subdistrict_id: "- Kecamatan belum diisi.",
                        zip_code: "- Kode Pos belum diisi.",
                        phone: "- No. Telepon belum diisi.",
                        password: "- Password belum diisi.",
                        password_confirm: {
                            required: "- Konfirmasi Password belum diisi.",
                            equalTo: "- Konfirmasi Password tidak Sama."
                        },
                        name_user: "- Nama Lengkap belum diisi.",
                        agree: "- Anda belum menyetujui syarat dan ketentuan."
                    },
                    errorLabelContainer: $(".alert"),
                    onkeyup: false,
                    submitHandler: function(form) {
                        form.submit();
                    }
                });

                $("#propinsi").change(function(){
                    $.getJSON("/proses/getkota", {
                        id: $(this).val()
                    },function(json){
                        var html = "<option value=''>Pilih Kota/Kab</option>";
                        for(var i = 0; i < json.length; i++)
                        {
                            html +=  "<option value='" + json[i].district_id + "'>" + json[i].name + "</option>";
                        }
                        $("#kota").html(html).removeAttr("disabled");
                        $("#kecamatan").html("<option value=''>Pilih Kecamatan</option>").attr("disabled", "disabled");
                    })
                });    
                $("#kota").change(function(){
                    $.getJSON("/proses/getkecamatan", {
                        id: $("#propinsi").val(),
                        idkota: $(this).val()
                    },function(json){
                        var html = "<option value=''>Pilih Kecamatan</option>";
                        for(var i = 0; i < json.length; i++)
                        {
                            html +=  "<option value='" + json[i].subdistrict_id + "'>" + json[i].name + "</option>";
                        }
                        $("#kecamatan").html(html).removeAttr("disabled");
                    })
                });  
            })
        </script>
        <!--script>
            var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script-->
    </body>
</html>